<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Your Game Recommendations</title>
  <link rel="stylesheet" href="{{url_for('static', filename='styles/result.css')}}">
</head>

<body>
  <div class="container fade-in">
    <h1>ðŸŽ® Your Recommended Games</h1>

    {% if result and result|length > 0 %}
    <div class="game-counter">
      Found {{ result|length }} game{% if result|length != 1 %}s{% endif %} perfect for you!
    </div>

    {% for game in result %}
    <div class="game-card">
      <img src="{{url_for('static', filename='images/result_page.jpg')}}" alt="{{ game.title }}" class="game-img">

      <h2 class="game-title">{{ game.title }}</h2>

      {% if game.tags %}
      <p class="game-genre"><strong>Genres:</strong> {{ game.tags }}</p>
      {% endif %}

      {% if game.description and game.description != "No description available" %}
      <p class="game-description">{{ game.description[:200] }}{% if game.description|length > 200 %}...{% endif %}</p>
      {% endif %}

      <p class="game-price">
        <strong>Price:</strong>
        {% if game.price == 0 %}
        <span class="free-game">Free to Play</span>
        {% else %}
        ${{ game.price }}
        {% endif %}
      </p>

      {% set available_platforms = [] %}
      {% for platform, available in game.platforms.items() if available %}
      {% set _ = available_platforms.append(platform) %}
      {% endfor %}

      {% if available_platforms %}
      <p class="game-platforms">
        <strong>Available on:</strong><br>
        {% for platform in available_platforms %}
        <span class="platform-badge">{{ platform }}</span>
        {% endfor %}
      </p>
      {% endif %}
    </div>
    {% endfor %}

    {% else %}
    <div class="no-games">
      <h2>ðŸŽ² Oops! No games found</h2>
      <p>We couldn't find any games matching your preferences right now.</p>
      <p>Try taking the quiz again with different answers!</p>
    </div>
    {% endif %}

    <a href="/quiz" class="btn">Take Quiz Again</a>
  </div>

  <footer class="footer">
    <p>ðŸŽ® Project: Game Recommender | by <strong>Ansh Shokeen</strong></p>
    <div class="social-icons">
      <a href="https://www.instagram.com/anshokeen_619/" target="_blank">Instagram</a>
      <a href="https://x.com/Anshspidey1" target="_blank">Twitter</a>
      <a href="https://www.linkedin.com/in/ansh-shokeen-6b057a286/" target="_blank">LinkedIn</a>
    </div>
  </footer>
</body>

</html>